<div class="table">

  <div class="paginator">
    <div class="paginator__item-container">
      <label for="show">Отображать </label>
      <div class="customSelect">
        <select id="show" name="show" [(ngModel)]="showRecordsDefault">
          <option *ngFor="let value of showRecordsValue">{{value}}</option>
        </select>
      </div>
      <span> записей</span>
      <span class="paginator__records">1 - {{records}} из {{allRecords}}</span>
    </div>

    <div class="paginator__item-container">
      <span class="selected">Колличество выбранных записей: {{selectedRecords}}</span>
    </div>
  </div>

  <table mat-table [dataSource]="dataSource">
    <ng-container matColumnDef="actions">
      <th mat-header-cell *matHeaderCellDef> Действия</th>
      <td mat-cell *matCellDef="let user">
        <button class="table__action-btn">
          <mat-icon>more_horiz</mat-icon>
        </button>
      </td>
    </ng-container>

    <ng-container matColumnDef="name">
      <th mat-header-cell class="table__header" *matHeaderCellDef="let user">
        <mat-checkbox (change)="$event ? toggleAllRows() : null; selectAll($event)"
                      [checked]="selection.hasValue() && isAllSelected()"
                      [indeterminate]="selection.hasValue() && !isAllSelected()"
                      >
        </mat-checkbox>
        <span>Логин</span>
      </th>
      <td mat-cell *matCellDef="let user">
        <mat-checkbox (click)="$event.stopPropagation()"
                      (change)="$event ? selection.toggle(user) : null; selectUser($event, user)"
                      [checked]="selection.isSelected(user)"
                      >
        </mat-checkbox>
        {{user.name}}
      </td>
    </ng-container>

    <ng-container matColumnDef="email">
      <th mat-header-cell class="table__header" *matHeaderCellDef> E-mail</th>
      <td mat-cell *matCellDef="let user"> {{user.email}} </td>
    </ng-container>

    <ng-container matColumnDef="phone">
      <th mat-header-cell class="table__header" *matHeaderCellDef> Телефон</th>
      <td mat-cell *matCellDef="let user"> {{user.phone}} </td>
    </ng-container>

    <ng-container matColumnDef="is_admin">
      <th mat-header-cell *matHeaderCellDef> Роли</th>
      <td mat-cell *matCellDef="let user">
        <span *ngIf="user.is_admin">Администратор</span>
        <span *ngIf="!user.is_admin">Пользователь</span>
      </td>
    </ng-container>

    <ng-container matColumnDef="update_at">
      <th mat-header-cell *matHeaderCellDef> Дата изменения</th>
      <td mat-cell *matCellDef="let user">
        {{user.update_at}}
      </td>
    </ng-container>

    <ng-container matColumnDef="create_at">
      <th mat-header-cell *matHeaderCellDef> Дата создания</th>
      <td mat-cell *matCellDef="let user">
        {{user.create_at}}
      </td>
    </ng-container>

    <ng-container matColumnDef="status">
      <th mat-header-cell *matHeaderCellDef> Статус</th>
      <td mat-cell *matCellDef="let user">
        <span *ngIf="user.status === 'ACTIVE'" class="green">Активен</span>
        <span *ngIf="user.status === 'BLOCKED'" class="red">Заблокирован</span>
      </td>
    </ng-container>

    <ng-container matColumnDef="is_ecp">
      <th mat-header-cell *matHeaderCellDef> Наличие ЭП</th>
      <td mat-cell *matCellDef="let user">
        <mat-icon *ngIf="user.is_ecp" class="green">check_circle</mat-icon>
        <mat-icon class="red" *ngIf="!user.is_ecp">cancel</mat-icon>
      </td>
    </ng-container>


    <tr mat-header-row *matHeaderRowDef="displayedColumns" class="table__header"></tr>
    <tr mat-row *matRowDef="let user; let id; columns: displayedColumns;" class="table__row"
        (click)="selection.toggle(user)"></tr>
  </table>

  <div class="paginator top-border">
    <div class="paginator__item-container">
      <label for="show2">Отображать </label>
      <div class="customSelect">
        <select id="show2" name="show" [(ngModel)]="showRecordsDefault">
          <option *ngFor="let value of showRecordsValue">{{value}}</option>
        </select>
      </div>
      <span> записей</span>
      <span class="paginator__records">1 - {{records}} из {{allRecords}}</span>
    </div>

    <div class="paginator__item-container">
      <span class="selected">Колличество выбранных записей: {{selectedRecords}}</span>
    </div>
  </div>

</div>
