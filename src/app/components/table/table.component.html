<div class="table">
  <mat-paginator #paginator [pageSizeOptions]="[1, 5, 10, 20]"
                 showFirstLastButtons
                 aria-label="Select page of periodic elements">
  </mat-paginator>
  <table mat-table [dataSource]="dataSource">
    <ng-container matColumnDef="actions">
      <th mat-header-cell *matHeaderCellDef> Действия</th>
      <td mat-cell *matCellDef="let user">
        <button class="table__action-btn">
          <mat-icon>more_horiz</mat-icon>
        </button>
      </td>
    </ng-container>

    <ng-container matColumnDef="name">
      <th mat-header-cell class="table__header" *matHeaderCellDef="let user">
        <mat-checkbox (change)="$event ? toggleAllRows() : null"
                      (change)="selectAll($event)"
                      [checked]="selection.hasValue() && isAllSelected()"
                      [indeterminate]="selection.hasValue() && !isAllSelected()">
        </mat-checkbox>
        <span>Логин</span>
      </th>
      <td mat-cell *matCellDef="let user">
        <mat-checkbox (click)="$event.stopPropagation()"
                      (change)="selectUser($event, user)"
                      [checked]="selection.isSelected(user)">
        </mat-checkbox>
        {{user.name}}
      </td>
    </ng-container>

    <ng-container matColumnDef="email">
      <th mat-header-cell class="table__header" *matHeaderCellDef> E-mail</th>
      <td mat-cell *matCellDef="let user"> {{user.email}} </td>
    </ng-container>

    <ng-container matColumnDef="phone">
      <th mat-header-cell class="table__header" *matHeaderCellDef> Телефон</th>
      <td mat-cell *matCellDef="let user"> {{user.phone}} </td>
    </ng-container>

    <ng-container matColumnDef="is_admin">
      <th mat-header-cell *matHeaderCellDef> Роли</th>
      <td mat-cell *matCellDef="let user">
        <span *ngIf="user.is_admin">Администратор</span>
        <span *ngIf="!user.is_admin">Пользователь</span>
      </td>
    </ng-container>

    <ng-container matColumnDef="update_at">
      <th mat-header-cell *matHeaderCellDef> Дата изменения</th>
      <td mat-cell *matCellDef="let user">
        {{user.update_at}}
      </td>
    </ng-container>

    <ng-container matColumnDef="create_at">
      <th mat-header-cell *matHeaderCellDef> Дата создания</th>
      <td mat-cell *matCellDef="let user">
        {{user.create_at}}
      </td>
    </ng-container>

    <ng-container matColumnDef="status">
      <th mat-header-cell *matHeaderCellDef> Статус</th>
      <td mat-cell *matCellDef="let user">
        <span *ngIf="user.status === 'ACTIVE'">Активен</span>
        <span *ngIf="user.status === 'BLOCKED'">Заблокирован</span>
      </td>
    </ng-container>

    <ng-container matColumnDef="is_ecp">
      <th mat-header-cell *matHeaderCellDef> Наличие ЭП</th>
      <td mat-cell *matCellDef="let user">
        <mat-icon *ngIf="user.is_ecp">check_circle</mat-icon>


        <span *ngIf="!user.is_ecp">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <g clip-path="url(#clip0_1_247)">
                <path
                  d="M12 0C5.38293 0 0 5.38293 0 12C0 18.6171 5.38293 24 12 24C18.6171 24 24 18.6171 24 12C24 5.38293 18.6171 0 12 0Z"
                  fill="#FF001F"/>
                <path
                  d="M16.4191 15.0049C16.81 15.396 16.81 16.0279 16.4191 16.4191C16.224 16.6141 15.9681 16.712 15.7119 16.712C15.4559 16.712 15.1999 16.6141 15.0049 16.4191L12 13.4139L8.99504 16.4191C8.80003 16.6141 8.54405 16.712 8.28807 16.712C8.03191 16.712 7.77592 16.6141 7.58092 16.4191C7.18999 16.0279 7.18999 15.396 7.58092 15.0049L10.586 12L7.58092 8.99504C7.18999 8.60393 7.18999 7.97203 7.58092 7.58092C7.97203 7.18999 8.60393 7.18999 8.99504 7.58092L12 10.586L15.0049 7.58092C15.396 7.18999 16.0279 7.18999 16.4191 7.58092C16.81 7.97203 16.81 8.60393 16.4191 8.99504L13.4139 12L16.4191 15.0049Z"
                  fill="#FAFAFA"/>
                </g>
                <defs>
                <clipPath id="clip0_1_247">
                <rect width="24" height="24" fill="white"/>
                </clipPath>
                </defs>
            </svg>

          </span>
      </td>
    </ng-container>


    <tr mat-header-row *matHeaderRowDef="displayedColumns" class="table__header"></tr>
    <tr mat-row *matRowDef="let user; let id; columns: displayedColumns;" (click)="selection.toggle(user)"></tr>
  </table>
  <mat-paginator #paginator2 [pageSizeOptions]="[1, 5, 10, 20]"
                 showFirstLastButtons
                 aria-label="Select page of periodic elements">
  </mat-paginator>
</div>
